<!--
    index.html
    Interface web para cadastro e consulta de pacientes na blockchain.
    Utiliza Web3.js para conectar ao contrato inteligente.
    Todos os campos e funções estão comentados para facilitar o entendimento.
-->
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Cadastro de Pacientes - Blockchain</title>
    <!-- Inclui a biblioteca Web3.js para conectar o front-end à blockchain -->
    <script src="https://cdn.jsdelivr.net/npm/web3@latest/dist/web3.min.js"></script>
    <style>
        /* Estilos básicos para layout */
        body { font-family: Arial, sans-serif; margin: 40px; }
        input, button { margin: 5px; }
        .container { max-width: 500px; margin: auto; }
        .result { margin-top: 20px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Cadastrar Paciente</h2>
        <!-- Formulário para cadastro de paciente -->
        <form id="cadastroForm">
            <input type="text" id="nome" placeholder="Nome" required><br>
            <input type="text" id="cpf" placeholder="CPF" required><br>
            <input type="number" id="idade" placeholder="Idade" required><br>
            <input type="text" id="enderecoPaciente" placeholder="Endereço"><br>
            <button type="submit">Cadastrar</button>
        </form>

        <h2>Consultar Paciente</h2>
        <!-- Campo para consulta de paciente pelo CPF -->
        <input type="text" id="consultaCpf" placeholder="CPF para consulta">
        <button onclick="consultarPaciente()">Consultar</button>

        <!-- Área para exibir o resultado da consulta -->
        <div class="result" id="resultadoConsulta"></div>
    </div>

    <script>
        // ABI (interface do contrato) e endereço do contrato
        // Substitua pelos valores reais após o deploy
        // Exemplo de ABI e endereço do contrato (substitua pelos reais após deploy)
        const contractABI = [];
        const contractAddress = "";
        let contract;

        // Inicializa a conexão com a blockchain e o contrato
        window.addEventListener('load', async () => {
            if (window.ethereum) {
                // Cria instância do Web3 usando o MetaMask
                window.web3 = new Web3(window.ethereum);
                // Solicita acesso à conta do usuário
                await window.ethereum.request({ method: 'eth_requestAccounts' });
                // Cria instância do contrato
                contract = new window.web3.eth.Contract(contractABI, contractAddress);
            } else {
                alert('MetaMask não detectado!');
            }
        });

        // Função chamada ao enviar o formulário de cadastro
        document.getElementById('cadastroForm').onsubmit = async function(e) {
            e.preventDefault();
            // Aqui vai a chamada para cadastrarPaciente do contrato
            // Exemplo:
            // await contract.methods.cadastrarPaciente(nome, cpf, idade, enderecoPaciente).send({from: account});
            // Aqui vai a chamada para cadastrarPaciente do contrato
            // Exemplo:
            // await contract.methods.cadastrarPaciente(nome, cpf, idade, enderecoPaciente).send({from: account});
            alert('Função de cadastro será implementada após deploy do contrato.');
        };

        // Função para consultar paciente pelo CPF
        async function consultarPaciente() {
            // Aqui vai a chamada para consultarPaciente do contrato
            // Exemplo:
            // const dados = await contract.methods.consultarPaciente(cpf).call();
            // Aqui vai a chamada para consultarPaciente do contrato
            // Exemplo:
            // const dados = await contract.methods.consultarPaciente(cpf).call();
            document.getElementById('resultadoConsulta').innerText = 'Função de consulta será implementada após deploy do contrato.';
        }
    </script>
</body>
</html>
